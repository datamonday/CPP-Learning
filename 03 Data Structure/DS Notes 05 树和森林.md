# 5. 树和二叉树

## 5.6 树和森林

### 5.6.1 树的双亲表示法

1. 双亲表示法

   特点：找双亲容易，找孩子难。

![forest1](./imgs/forest1.png)

![forest1](./imgs/forest2.png)

2. 孩子链表

   特点：找孩子容易，找双亲难。

![forest1](./imgs/forest3.png)

![forest1](./imgs/forest4.png)

3. 孩子兄弟表示法

   又称为二叉树表示法或二叉链表表示法，即以二叉链表作为树的存储结构。

![forest1](./imgs/forest5.png)

### 5.6.2 森林与二叉树的转换

由于二叉树和树都可以用二叉链表作为存储结构，则以二叉链表作为媒介，可以导出树与二叉树之间的一个对应关系。也就是说，给定一棵树，可以找到唯一的一棵二叉树与之对应，从物理结构来看，他们的二叉链表是相同的，只是解释不同而已。

![forest1](./imgs/forest6.png)

**将树转换成二叉树——兄弟相连留长子**

- 加线：在兄弟之间加一连线
- 抹线：对每个结点，除了其左孩子外，去除其与其余孩子之间的关系
- 旋转：以树的根节点为轴心，将整棵树顺时针旋转45°。

![forest1](./imgs/forest7.png)

**将二叉树转换成树——左孩右右连双亲，去掉原来右孩线**

- 加线：若p结点是双亲结点的左孩子，则将p的右孩子，右孩子的右孩子，沿分支找到的所有右孩子，都与p的双亲用线连接起来；
- 抹线：抹掉原二叉树中双亲与右孩子之间的连线；
- 调整：将结点按层次排列，形成树结构。

![forest1](./imgs/forest8.png)

**将森林转换成二叉树——树边二叉根相连**

- 将各棵树分别转换成二叉树；
- 将每棵树的根节点用线相连；
- 以第一棵树根节点维二叉树的根，再以根节点为轴心，顺时针旋转，构成二叉树型结构。

![forest1](./imgs/forest9.png)

**将二叉树转换成森林——去掉全部右孩线，孤立二叉再还原**

- 抹线：将二叉树中根节点与其右孩子连线，及沿由分支搜索到的所有右孩子间连线全部抹掉，使之变成孤立的二叉树。
- 还原：将孤立的二叉树还原成树。

![forest1](./imgs/forest10.png)

### 5.6.3 树和森林的遍历

![forest1](./imgs/forest11.png)

![forest1](./imgs/forest12.png)

![forest1](./imgs/forest13.png)

![forest1](./imgs/forest14.png)

![forest1](./imgs/forest15.png)

## 5.7 哈夫曼树（最优二叉树）及其应用

![forest1](./imgs/ht1.png)

![forest1](./imgs/ht2.png)

**路径**：从树种一个结点到另一个结点之间的分支构成这两个结点间的路径。

**结点的路径长度**：两结点间路径上的分支数。

![forest1](./imgs/ht3.png)

**树的路径长度**：从树根到每一个结点的路径长度之和。记作TL。

![forest1](./imgs/ht4.png)

**权（weight）**：将树中结点赋给一个有着某种含义的数值，则这个数值称为该结点的权。

**结点的带权路径长度**：从根结点到该结点之间的路径长度与该结点的权的乘积。

**树的带权路径长度**：树中所有叶子结点的带权路径长度之和。

![forest1](./imgs/ht5.png)

### 5.7.1 哈夫曼树的定义

哈夫曼树（最优二叉树）：带权路径长度（Weight Path Length，WPL）最短的二叉树。

注意：“带权路径长度最短”是在“度相同”的树中比较而得到的结果，因此有最优二叉树，最优三叉树之称等等。1952年，哈夫曼提出。

![forest1](./imgs/ht6.png)

- 满二叉树不一定是哈夫曼树
- 哈夫曼树中权越大的叶子离跟越近
- 具有相同带权结点的哈夫曼树不唯一

### 5.7.2 哈夫曼树的构造算法

![forest1](./imgs/ht7.png)

![forest1](./imgs/ht8.png)

![forest1](./imgs/ht9.png)

![forest1](./imgs/ht10.png)

总结：

- 在哈夫曼算法中，初始时有n棵二叉树，要经过n-1次合并最终形成哈夫曼树。
- 经过 n-1 次合并产生 n-1 个新结点，且这 n-1 个新结点都是具有两个哈子的分支节点。
- 哈夫曼树中共有 n+n-1 = 2n-1 个结点，且其所有的分支节点的度均不为1。

![forest1](./imgs/ht11.png)

![forest1](./imgs/ht12.png)

![forest1](./imgs/ht13.png)

![forest1](./imgs/ht14.png)

![forest1](./imgs/ht15.png)

### 5.7.3 哈夫曼编码

![forest1](./imgs/ht16.png)

![forest1](./imgs/ht17.png)

![forest1](./imgs/ht18.png)

![forest1](./imgs/ht19.png)

![forest1](./imgs/ht20.png)

![forest1](./imgs/ht21.png)

![forest1](./imgs/ht22.png)

如何生成各个叶节点的哈夫曼编码？

假设要生成上图中G结点的哈夫曼编码，首先根据链表，查到G是7号结点，其双亲结点是8号结点，7号是8号结点的左孩子，所以记为0；然后看8号结点的双亲结点是10号结点，8号是10号结点的左孩子，所以记为0；如此循环往复，直到根节点，根节点的双亲结点为0。然后，将结果按位逆序，得到的编码就是哈夫曼编码。对于每个叶节点均重复上述操作，得到所有字符的哈夫曼编码。

![forest1](./imgs/ht23.png)

![forest1](./imgs/ht24.png)

## 5.8 文件的编码和解码

![forest1](./imgs/ht25.png)

![forest1](./imgs/ht26.png)

![forest1](./imgs/ht27.png)